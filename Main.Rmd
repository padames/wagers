---
title: "Visualizing expectations and variation through simulation"
author: "P. Adames"
date: "`r Sys.Date()`"
output:
  html_document:
    df_print: paged
  pdf_document: default
  word_document: default
bibliography: biblio.bib
description: "Visualizing expectations and variance via simulation"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Expected values and variance

I am not a fan of gambling but I find it interesting to think that life itself is a gamble.
To avoid the inevitability of daily random events seems futile: 
traffic volume and weather are but the two more prominent in our daily lives.

Oftentimes forecasts and averages are rendered useless by the
seemingly wild variations encountered in spatial and temporal oddities inherent to natural phenomena.
After all, statistics in general is well known for failing to predict the unusual events.

## Wagers 

As a means to experiencing the impact of expected values and variability let's follow a slightly modified
example of wagers from [@RodMen2018, p.19].

For wager 3:  you pay $300 to enter and I roll a die. If it comes up 1, 2, or 3, then
I keep your money. If it comes up 4, 5, or 6, then I give you back $600 (your
original bet plus a $300 profit).

For wager 4:  you pay $300 to enter and I roll a die. If it comes up 1 or 2 then I get
to keep your money. If it comes up 3, 4, 5, or 6 then I give you back $450 (your original $300 plus a profit of $150).


## Comparing the wagers

We need to compare the two wagers to assess their relative benefit.
The statistical mean of the expected value of each wager is a  
straightforward way of doing so.

### Expected Profit from the wagers

The profit of a wager is defined as the payout minus the cost of entry.
The expected profit of each wager are:

    E(W_3) = [(0) x (1/2) + 300 x (1/2)] - 300

    E(W_4) = [(0) x (2/3) + 150 x (1/3)] - 300
 
 
Note: I modified the values of the original wagers in an effort to make the dollar amounts more
realistic. This apparently takes away from what is considere a fair bet, however we will defer
that subject for another day and definitively recommend that the curious reader go to the motivating 
source for this discussion [@RodMen2018, Chapter 2] 

Let's use R to compute those values.

```{r "expected profit from waher 3", include=TRUE, cache=FALSE}
cost_of_entry = 300
probability_of_die_eq_or_less_than_three = 0.5
payout_of_die_eq_or_less_than_three = 0
payout_of_die_greater_than_three = 300 + 300
expected_value_wager_3 <- (payout_of_die_eq_or_less_than_three *
                          probability_of_die_eq_or_less_than_three +
                          payout_of_die_greater_than_three * (1 - probability_of_die_eq_or_less_than_three)) -
  cost_of_entry
cat(paste(
  paste("Expected net profit from wager 3:",
        ifelse(all.equal(expected_value_wager_3, 0.0),
               0.0, 
               expected_value_wager_3),
        sep = "\n"),
  " dollars"))
```

In a similar fashion the expected statistical profit for wager 4 is:

```{r "expected profit from wager 4", include=TRUE, cache=FALSE}
cost_of_entry = 300
probability_of_die_eq_or_less_than_two = 1 / 3
payout_of_die_eq_or_less_than_two = 0
payout_of_die_greater_than_two = 300 + 150
expected_value_wager_4 <-payout_of_die_eq_or_less_than_two * probability_of_die_eq_or_less_than_two +
  payout_of_die_greater_than_two * (1 - probability_of_die_eq_or_less_than_two) -
  cost_of_entry
cat(paste(
  paste("Expected net profit from wager 4:",
        ifelse(all.equal(expected_value_wager_4, 0),
               0, 
               expected_value_wager_3),
        sep = "\n"),
  " dollars"))
```

All that effort to confirm that neither wager will either make you money nor 
will make you lose a penny in the long run.
So, where does that leave us in terms of the relative merits or 
drawbacks if each bet?
We need other tools to analyze the outcomes from engaging in either
wager.



### Simulation

Wagers 3 and 4 have zero expected profit/loss. We can verify this via numerical simulation.
In the following animated gif image I have repeated 30 sets of 20,000 bets each starting with
a different random number seed, for each of wager described above.


```{r "comparing wagers via simulation", echo=FALSE, results='asis'}
knitr::include_graphics("animations/wager_comp_sim.gif", dpi = 86)
```


## Variance

The statistical variance of the wagers is as follows:

    V(x) = E{[X - E(X)]^2} = E(X^2) - {E(X)}^2

         = (x_1)^2 P(X = x_1) + .. + (x_n)^2 P(X = x_n)

           - {x_1 P(X = x_1) + .. + x_n P(X= x_n)}^2

Substituting for wager 3:

`V(W_3) = (0)^2 x (1/2) + (300)^2 x (1/2)] - `

`V(W_4) = [(0) x (2/3) + 150 x (1/3)] - 300`



## References